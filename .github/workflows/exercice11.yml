name: VÃ©rification Exercice 11

on: [push]
 # push:
  #  paths:
   #   - 'exercices/exercice11/**'

jobs:
  exercice11:
    runs-on: ubuntu-latest

    steps:
      - name: Cloner le dÃ©pÃ´t
        uses: actions/checkout@v3

      - name: Installer Java
        uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: '17'

      - name: TÃ©lÃ©charger CheckStyle
        run: |
          curl -LJO https://github.com/checkstyle/checkstyle/releases/download/checkstyle-10.12.4/checkstyle-10.12.4-all.jar

      - name: VÃ©rifier les conventions EMF (CheckStyle)
        run: |
          echo "VÃ©rification des conventions EMF (CheckStyle)"
          java -jar checkstyle-10.12.4-all.jar -c checkstyle.xml exercices/exercice11/ExercicesInversionTableau/src/*.java || true

      - name: TÃ©lÃ©charger PMD
        run: |
          curl -LJO https://github.com/pmd/pmd/releases/download/pmd_releases/6.55.0/pmd-bin-6.55.0.zip
          unzip pmd-bin-6.55.0.zip

      - name: Lancer l'analyse PMD
        run: |
          echo "ðŸš€ Analyse PMD en cours..."
          echo "ðŸ“„ Fichiers analysÃ©s : exercices/exercice11/*.java"
          echo "ðŸ§  RÃ¨gles appliquÃ©es :"
          echo "   - Structures de contrÃ´le (if, else, for, while) doivent avoir des accolades"
          echo "   - Les blocs switch doivent contenir un 'default'"

          ./pmd-bin-6.55.0/bin/run.sh pmd -d exercices/exercice11/ -R pmd-ruleset.xml -f text || true

          echo "âœ… Analyse PMD terminÃ©e."

      - name: Lancer uniquement le test Exercice11
        run: mvn -Dtest=exercices.Exercice11Test test